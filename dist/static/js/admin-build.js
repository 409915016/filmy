webpackJsonp([2],{

/***/ 103:
/***/ (function(module, exports) {

module.exports = {"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}

/***/ }),

/***/ 104:
/***/ (function(module, exports) {

module.exports = {"name":"elliptic","version":"6.4.0","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^1.4.3","coveralls":"^2.11.3","grunt":"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2","istanbul":"^0.4.2","jscs":"^2.9.0","jshint":"^2.6.0","mocha":"^2.1.0"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"}}

/***/ }),

/***/ 107:
/***/ (function(module, exports) {

module.exports = {"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}

/***/ }),

/***/ 116:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 117:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 118:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 15:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_min__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_min___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_min__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_min_model__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_min_model___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_min_model__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__libs_chinese_string_indexer__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_lodash__);









__WEBPACK_IMPORTED_MODULE_4_min_model___default.a.use(__WEBPACK_IMPORTED_MODULE_3_min___default.a);

var Category = __WEBPACK_IMPORTED_MODULE_4_min_model___default.a.extend('category', {
  title: String,
  name: String,
  subtitle: String,
  cover: String
});

Category.setIndexerForColumn('title', __WEBPACK_IMPORTED_MODULE_6__libs_chinese_string_indexer__["a" /* default */]);
Category.setIndex('title');
Category.setIndex('name');

var ready = false;

Category.load = function () {
  return Category.allInstances().then(function (categories) {
    if (categories.length > 0) {
      ready = true;
      return categories;
    } else {
      return __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__["a" /* default */].getFile('categories.json').then(function (body) {
        return JSON.parse(body);
      });
    }
  }).then(function (categories) {
    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all(categories.map(function (category) {
      if (!ready) {
        return new __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a(function (resolve) {
          var _category = new Category(category._key, category);
          _category.once('ready', function () {
            return resolve(_category);
          });
        });
      } else {
        return category;
      }
    }));
  }).then(function (categories) {
    return categories.sort(function (a, b) {
      return a.getCacheData().created_at < b.getCacheData().created_at;
    });
  }).catch(function (error) {
    return [error];
  });
};

Category.loadIfNotInit = function () {
  if (!ready) {
    return Category.load();
  } else {
    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.resolve();
  }
};

Category.saveToCloud = function (password) {
  if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7_lodash__["isString"])(password)) {
    throw new TypeError('Password must be a string');
  }

  return __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__["a" /* default */].fetchPutToken(password, 'categories.json').then(function (putToken) {
    return Category.dump().then(function (data) {
      return [data, putToken];
    });
  }).then(function (_ref) {
    var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
        data = _ref2[0],
        putToken = _ref2[1];

    var fileData = new Blob([__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(data)], { type: 'application/json' });
    fileData.name = 'categories.json';

    return __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__["a" /* default */].putFile(fileData.name, fileData, { putToken: putToken });
  });
};

/* harmony default export */ __webpack_exports__["a"] = (Category);

/***/ }),

/***/ 183:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Admin_vue__ = __webpack_require__(210);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1cae0469_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Admin_vue__ = __webpack_require__(380);
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = null
/* scopeId */
var __vue_scopeId__ = null
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Admin_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1cae0469_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Admin_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 188:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Album_vue__ = __webpack_require__(216);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_de291712_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Album_vue__ = __webpack_require__(396);
function injectStyle (ssrContext) {
  __webpack_require__(334)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-de291712"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Album_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_de291712_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Album_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 189:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Albums_vue__ = __webpack_require__(217);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_dfa288e8_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Albums_vue__ = __webpack_require__(397);
function injectStyle (ssrContext) {
  __webpack_require__(335)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-dfa288e8"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Albums_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_dfa288e8_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Albums_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 19:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_min__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_min___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_min__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_min_model__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_min_model___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_min_model__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__libs_chinese_string_indexer__ = __webpack_require__(42);









__WEBPACK_IMPORTED_MODULE_4_min_model___default.a.use(__WEBPACK_IMPORTED_MODULE_3_min___default.a);

var Album = __WEBPACK_IMPORTED_MODULE_4_min_model___default.a.extend('album', {
  title: String,
  content: String,
  category: String,
  created_at: Number,
  photos: Array
});

// Album.setIndexerForColumn('title', ChineseStringIndexer)
// Album.setIndexerForColumn('content', ChineseStringIndexer)
Album.setIndex('title');
Album.setIndex('content');

var ready = false;

Album.fetchByCategory = function (categoryName) {
  return Album.loadIfNotInit().then(function () {
    return Album.search('category', categoryName);
  }).then(function (albums) {
    return albums.sort(function (a, b) {
      return a.getCacheData().created_at < b.getCacheData().created_at;
    });
  });
};

Album.load = function () {
  return Album.allInstances().then(function (albums) {
    if (albums.length > 0) {
      ready = true;
      return albums;
    } else {
      return __WEBPACK_IMPORTED_MODULE_6__qiniu_bucket__["a" /* default */].getFile('albums.json').then(function (body) {
        return JSON.parse(body);
      });
    }
  }).then(function (albums) {
    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all(albums.map(function (album) {
      if (!ready) {
        return new __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a(function (resolve) {
          var _album = new Album(album._key, album);
          _album.once('ready', function () {
            return resolve(_album);
          });
        });
      } else {
        return album;
      }
    }));
  });
};

Album.loadIfNotInit = function () {
  if (!ready) {
    return Album.load();
  } else {
    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.resolve();
  }
};

Album.saveToCloud = function (password) {
  if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__["isString"])(password)) {
    throw new TypeError('Password must be a string');
  }

  return Album.dump().then(function (data) {
    return __WEBPACK_IMPORTED_MODULE_6__qiniu_bucket__["a" /* default */].fetchPutToken(password, 'albums.json').then(function (putToken) {
      return [data, putToken];
    });
  }).then(function (_ref) {
    var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
        data = _ref2[0],
        putToken = _ref2[1];

    var fileData = new Blob([__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(data)], { type: 'application/json' });
    fileData.name = 'albums.json';

    return __WEBPACK_IMPORTED_MODULE_6__qiniu_bucket__["a" /* default */].putFile(fileData.name, fileData, { putToken: putToken });
  });
};

/* harmony default export */ __webpack_exports__["a"] = (Album);

/***/ }),

/***/ 190:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Categories_vue__ = __webpack_require__(218);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c1846478_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Categories_vue__ = __webpack_require__(395);
function injectStyle (ssrContext) {
  __webpack_require__(333)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-c1846478"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Categories_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c1846478_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Categories_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 191:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Category_vue__ = __webpack_require__(219);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_031487a6_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Category_vue__ = __webpack_require__(378);
function injectStyle (ssrContext) {
  __webpack_require__(319)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-031487a6"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Category_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_031487a6_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Category_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 192:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Dashboard_vue__ = __webpack_require__(220);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_243d4e1c_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Dashboard_vue__ = __webpack_require__(382);
function injectStyle (ssrContext) {
  __webpack_require__(322)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-243d4e1c"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Dashboard_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_243d4e1c_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Dashboard_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 193:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Settings_vue__ = __webpack_require__(221);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_09866c4b_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Settings_vue__ = __webpack_require__(379);
function injectStyle (ssrContext) {
  __webpack_require__(320)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-09866c4b"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Settings_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_09866c4b_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Settings_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 210:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Sidebar_vue__ = __webpack_require__(377);
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ __webpack_exports__["a"] = ({
  components: {
    Sidebar: __WEBPACK_IMPORTED_MODULE_0__Sidebar_vue__["a" /* default */]
  }
});

/***/ }),

/***/ 211:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__entries_admin_main__ = __webpack_require__(80);
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ __webpack_exports__["a"] = ({
  created: function created() {
    var _this = this;

    __WEBPACK_IMPORTED_MODULE_0__entries_admin_main__["sideBarBus"].$on('sideBarUpdate', function (categories, albums) {
      _this.categories = categories;
      _this.albums = albums;
    });
  },
  data: function data() {
    return {
      categories: 0,
      albums: 0,
      active: 'dashboard'
    };
  },

  mounted: function mounted() {
    var _this2 = this;

    this.$nextTick(function () {});
    this.$router.push('dashboard');
    this.$router.beforeEach(function (to, from, next) {
      _this2.active = to.path.split('/')[1];
      next();
    });
    new Affix(this.$refs.sidebar, {
      offsetTop: 50
    });
  },
  methods: {
    //      update (categories = this.categories, albums = this.albums) {
    //        this.categories = categories
    //        this.albums = albums
    //      }
  }
});

/***/ }),

/***/ 216:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_map__ = __webpack_require__(225);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_Album__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__models_Category__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vue__ = __webpack_require__(24);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_qiniu_js__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_qiniu_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_qiniu_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__models_qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_sweetalert__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_sweetalert___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_sweetalert__);




//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//







var URL = window.URL || window.webkitURL;
var swalp = function swalp() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return new __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a(function (resolve) {
    __WEBPACK_IMPORTED_MODULE_9_sweetalert___default.a.apply(undefined, args.concat([function () {
      return resolve.apply(undefined, arguments);
    }]));
  });
};
/* harmony default export */ __webpack_exports__["a"] = ({
  data: function data() {
    return {
      album: {
        photos: []
      },
      model: null,
      categories: [],
      newer: false,
      over: false,
      photosToUpload: new __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_map___default.a()
    };
  },
  mounted: function mounted() {
    var _this = this;

    __WEBPACK_IMPORTED_MODULE_7_qiniu_js___default.a.bind(this.$refs.add).on('file', this.addPhoto);
    if (__WEBPACK_IMPORTED_MODULE_7_qiniu_js___default.a.supportDnd) {
      __WEBPACK_IMPORTED_MODULE_7_qiniu_js___default.a.bind.dnd(this.$refs.photos, {}).on('over', function () {
        return _this.over = true;
      }).on('out', function () {
        return _this.over = false;
      });
    }
    __WEBPACK_IMPORTED_MODULE_5__models_Category__["a" /* default */].dump().then(function (categories) {
      return _this.categories = categories;
    });
    if (this.$route.params.key === 'new') return this.newer = true;
    __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].fetch(this.$route.params.key).then(function (album) {
      if (_this.categories.length > 0) {
        _this.categories.filter(function (c) {
          return c.name === album.getCacheData().category;
        }).shift().selected = true;
      }
      _this.model = album;
      _this.album = album.getCacheData();
    });
  },

  methods: {
    removePhoto: function removePhoto(index) {
      this.photosToUpload.delete(this.album.photos[index]);
      this.album.photos.splice(index, 1);
    },
    addPhoto: function addPhoto(file) {
      var _this2 = this;

      this.over = false;
      file.imageView({
        mode: 1,
        width: 125,
        height: 125
      }, function (err, image) {
        if (err) return;
        image.toBlob(function (blob) {
          var blobUrl = URL.createObjectURL(blob);
          _this2.album.photos.push(blobUrl);
          _this2.photosToUpload.set(blobUrl, file);
        });
      });
    },
    submit: function submit() {
      var _this3 = this;

      var i18n = __WEBPACK_IMPORTED_MODULE_6_vue__["a" /* default */].filter('i18n');
      swalp({
        title: i18n('input password'),
        type: 'input',
        inputType: 'password',
        showCancelButton: true,
        closeOnConfirm: false,
        animation: "slide-from-top",
        showLoaderOnConfirm: true
      }).then(function (password) {
        return __WEBPACK_IMPORTED_MODULE_8__models_qiniu_bucket__["a" /* default */].fetchPutToken(password).then(function (putToken) {
          return [putToken, password];
        });
      }).then(function (_ref) {
        var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
            putToken = _ref2[0],
            password = _ref2[1];

        if (_this3.photosToUpload.size === 0) {
          return [_this3.album.photos, password];
        } else {
          var files = [];
          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(_this3.photosToUpload.entries()), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var _ref3 = _step.value;

              var _ref4 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref3, 2);

              var file = _ref4[1];

              files.push(file);
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }

          return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a.all(files.map(function (file) {
            var key = 'assets/photos/' + Math.random().toString(32).substr(2);
            return __WEBPACK_IMPORTED_MODULE_8__models_qiniu_bucket__["a" /* default */].putFile(key, file, { putToken: putToken }).then(function () {
              return __WEBPACK_IMPORTED_MODULE_8__models_qiniu_bucket__["a" /* default */].key(key).url();
            });
          })).then(function (urls) {
            return _this3.album.photos.filter(function (url) {
              return url[0] === 'h';
            }) // http://
            .concat(urls);
          }).then(function (urls) {
            return [urls, password];
          });
        }
      }).then(function (_ref5) {
        var _ref6 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref5, 2),
            photos = _ref6[0],
            password = _ref6[1];

        if (_this3.newer) {
          _this3.model = new __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */]({});
        }
        return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default.a.all(['title', 'category', 'content'].map(function (key) {
          return _this3.model.set(key, _this3.album[key]);
        })).then(function () {
          return _this3.model.set('photos', photos);
        }).then(function () {
          return password;
        });
      }).then(function (password) {
        return __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].saveToCloud(password);
      }).then(function () {
        _this3.photosToUpload = new __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_map___default.a();
        __WEBPACK_IMPORTED_MODULE_9_sweetalert___default()({
          title: i18n('update succeed'),
          type: 'success'
        });
      }).catch(function (err) {
        __WEBPACK_IMPORTED_MODULE_9_sweetalert___default()({
          title: err.message || i18n('something went wrong'),
          type: 'error'
        });
      });
    },
    Delete: function Delete() {
      var _this4 = this;

      var i18n = __WEBPACK_IMPORTED_MODULE_6_vue__["a" /* default */].filter('i18n');
      swalp({
        title: i18n('are you sure'),
        type: 'warning',
        showCancelButton: true,
        confirmButtonColor: "#DD6B55",
        closeOnConfirm: false
      }).then(function () {
        return swalp({
          title: i18n('input password'),
          type: 'input',
          inputType: 'password',
          showCancelButton: true,
          closeOnConfirm: false,
          showLoaderOnConfirm: true
        });
      }).then(function (password) {
        return _this4.model.remove().then(function () {
          return password;
        });
      }).then(function (password) {
        return __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].saveToCloud(password);
      }).then(function () {
        __WEBPACK_IMPORTED_MODULE_9_sweetalert___default()({
          title: i18n('update succeed'),
          type: 'success'
        });
        _this4.$route.router.go('/albums');
      }).catch(function (err) {
        __WEBPACK_IMPORTED_MODULE_9_sweetalert___default()({
          title: err.message || i18n('something went wrong'),
          type: 'error'
        });
      });
    }
  }
});

/***/ }),

/***/ 217:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_Category__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_Album__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lazysizes_lazysizes_min__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lazysizes_lazysizes_min___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lazysizes_lazysizes_min__);



//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//





/* harmony default export */ __webpack_exports__["a"] = ({
  data: function data() {
    return {
      categories: [],
      albums: [],
      allAlbums: [],
      query: ''
    };
  },
  mounted: function mounted() {
    var _this = this;

    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([__WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].loadIfNotInit().then(function () {
      return __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].dump();
    }), __WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].loadIfNotInit().then(function () {
      return __WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].dump();
    })]).then(function (_ref) {
      var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
          albums = _ref2[0],
          categories = _ref2[1];

      albums = _this.patchCategoryInfo(albums, categories);
      _this.allAlbums = albums;
      _this.albums = albums;
      _this.categories = categories;
    });
  },

  methods: {
    newer: function newer() {
      this.$router.push('/albums/new');
    },
    showCategory: function showCategory(category) {
      if (!category) return this.albums = this.allAlbums;
      this.albums = this.allAlbums.filter(function (n) {
        return n.category === category.name;
      });
    },
    search: function search() {
      var _this2 = this;

      __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([__WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].search('title', this.query), __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].search('content', this.query)]).then(function (_ref3) {
        var _ref4 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref3, 2),
            a = _ref4[0],
            b = _ref4[1];

        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__["uniq"])(a.concat(b));
      }).then(function (albums) {
        albums = albums.map(function (n) {
          return n.getCacheData();
        });
        albums = _this2.patchCategoryInfo(albums);
        _this2.albums = albums;
      });
    },
    patchCategoryInfo: function patchCategoryInfo() {
      var albums = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.albums;
      var categories = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.categories;

      var _loop = function _loop(album) {
        console.log();
        album.categoryTitle = categories.filter(function (n) {
          return n.name === album.category;
        }).shift().title;
      };

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(albums), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var album = _step.value;

          _loop(album);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return albums;
    }
  }
});

/***/ }),

/***/ 218:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_Category__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_Album__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lazysizes_lazysizes_min__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lazysizes_lazysizes_min___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lazysizes_lazysizes_min__);



//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//





/* harmony default export */ __webpack_exports__["a"] = ({
  data: function data() {
    return {
      categories: [],
      albums: [],
      query: ''
    };
  },

  mounted: function mounted() {
    var _this = this;

    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([__WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].loadIfNotInit().then(function () {
      return __WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].dump();
    }), __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].loadIfNotInit().then(function () {
      return __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].dump();
    })]).then(function (_ref) {
      var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
          categories = _ref2[0],
          albums = _ref2[1];

      var _loop = function _loop(category) {
        category.count = albums.filter(function (album) {
          return album.category === category.name;
        }).length;
      };

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(categories), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var category = _step.value;

          _loop(category);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      _this.albums = albums;
      _this.categories = categories;
    });
  },

  methods: {
    newer: function newer() {
      this.$router.push('/categories/new');
    },
    search: function search() {
      var _this2 = this;

      __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([__WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].search('title', this.query), __WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].search('name', this.query)]).then(function (_ref3) {
        var _ref4 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref3, 2),
            a = _ref4[0],
            b = _ref4[1];

        return a.concat(b);
      }).then(function (result) {
        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_lodash__["uniqBy"])(result, function (n) {
          return n.getCacheData().name;
        });
      }).then(function (result) {
        return result.map(function (n) {
          return n.getCacheData();
        });
      }).then(function (categories) {
        var _loop2 = function _loop2(category) {
          category.count = _this2.albums.filter(function (album) {
            return album.category === category.name;
          }).length;
        };

        var _iteratorNormalCompletion2 = true;
        var _didIteratorError2 = false;
        var _iteratorError2 = undefined;

        try {
          for (var _iterator2 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(categories), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var category = _step2.value;

            _loop2(category);
          }
        } catch (err) {
          _didIteratorError2 = true;
          _iteratorError2 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
              _iterator2.return();
            }
          } finally {
            if (_didIteratorError2) {
              throw _iteratorError2;
            }
          }
        }

        _this2.categories = categories;
      });
    }
  }
});

/***/ }),

/***/ 219:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_Category__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_Album__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_sweetalert__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_sweetalert___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_sweetalert__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vue__ = __webpack_require__(24);


//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//






var swalp = function swalp() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve) {
    swal.apply(undefined, args.concat([function () {
      return resolve.apply(undefined, arguments);
    }]));
  });
};
/* harmony default export */ __webpack_exports__["a"] = ({
  data: function data() {
    return {
      category: {},
      model: null,
      newer: false
    };
  },
  mounted: function mounted() {
    var _this = this;

    if (this.$route.params.name === 'new') {
      this.newer = true;
      return;
    }
    __WEBPACK_IMPORTED_MODULE_2__models_Category__["a" /* default */].search('name', this.$route.params.name).then(function (_ref) {
      var _ref2 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray___default()(_ref, 1),
          category = _ref2[0];

      _this.model = category;
      _this.category = category.getCacheData();
    });
  },


  methods: {
    submit: function submit() {
      var _this2 = this;

      var i18n = __WEBPACK_IMPORTED_MODULE_6_vue__["a" /* default */].filter('i18n');
      var updateAlbums = false;
      swalp({
        title: i18n('input password'),
        type: 'input',
        inputType: 'password',
        showCancelButton: true,
        closeOnConfirm: false,
        animation: "slide-from-top",
        showLoaderOnConfirm: true
      }).then(function (password) {
        return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve) {
          if (_this2.$refs.cover.files.length === 0) {
            return resolve([_this2.category.cover, password]);
          }
          __WEBPACK_IMPORTED_MODULE_4__models_qiniu_bucket__["a" /* default */].fetchPutToken(password).then(function (putToken) {
            var key = 'assets/category-' + _this2.category.name + '-' + Math.random().toString(32).substr(2);
            return __WEBPACK_IMPORTED_MODULE_4__models_qiniu_bucket__["a" /* default */].putFile(key, _this2.$refs.cover.files[0], { putToken: putToken }).then(function () {
              return key;
            });
          }).then(function (key) {
            return resolve([__WEBPACK_IMPORTED_MODULE_4__models_qiniu_bucket__["a" /* default */].key(key).url(), password]);
          });
        });
      }).then(function (_ref3) {
        var _ref4 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray___default()(_ref3, 2),
            coverUrl = _ref4[0],
            password = _ref4[1];

        _this2.category.cover = coverUrl;
        if (_this2.newer) {
          return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve) {
            _this2.model = new __WEBPACK_IMPORTED_MODULE_2__models_Category__["a" /* default */](_this2.category);
            _this2.model.once('ready', function () {
              return resolve(password);
            });
          });
        } else if (_this2.$route.params.name !== _this2.category.name) {
          return __WEBPACK_IMPORTED_MODULE_3__models_Album__["a" /* default */].search('category', _this2.$route.params.name).then(function (albums) {
            return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(albums.map(function (album) {
              return album.set('category', _this2.category.name);
            })).then(function () {
              return __WEBPACK_IMPORTED_MODULE_3__models_Album__["a" /* default */].saveToCloud(password);
            }).then(function () {
              return password;
            });
          });
        } else {
          return password;
        }
      }).then(function (password) {
        return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.all(['title', 'name', 'subtitle', 'cover'].map(function (key) {
          return _this2.model.set(key, _this2.category[key]);
        })).then(function () {
          return password;
        });
      }).then(function (password) {
        return __WEBPACK_IMPORTED_MODULE_2__models_Category__["a" /* default */].saveToCloud(password);
      }).then(function () {
        swal({
          title: i18n('update succeed'),
          type: 'success'
        });
      }).catch(function (err) {
        swal({
          title: err.message || i18n('something went wrong'),
          type: 'error'
        });
      });
    },
    Delete: function Delete() {
      var _this3 = this;

      var i18n = __WEBPACK_IMPORTED_MODULE_6_vue__["a" /* default */].filter('i18n');
      swalp({
        title: i18n('are you sure'),
        type: 'warning',
        showCancelButton: true,
        confirmButtonColor: "#DD6B55",
        closeOnConfirm: false
      }).then(function () {
        return swalp({
          title: i18n('input password'),
          type: 'input',
          inputType: 'password',
          showCancelButton: true,
          closeOnConfirm: false,
          showLoaderOnConfirm: true
        });
      }).then(function (password) {
        return _this3.model.remove().then(function () {
          return password;
        });
      }).then(function (password) {
        return __WEBPACK_IMPORTED_MODULE_2__models_Category__["a" /* default */].saveToCloud(password);
      }).then(function () {
        swal({
          title: i18n('update succeed'),
          type: 'success'
        });
        _this3.$router.push('/categories');
      }).catch(function (err) {
        swal({
          title: err.message || i18n('something went wrong'),
          type: 'error'
        });
      });
    }
  }
});

/***/ }),

/***/ 220:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_Category__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_Album__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__entries_admin_main__ = __webpack_require__(80);



//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




/* harmony default export */ __webpack_exports__["a"] = ({
  data: function data() {
    return {
      numbers: {
        categories: 0,
        albums: 0,
        photos: 0
      },
      categories: []
    };
  },
  mounted: function mounted() {
    var _this = this;

    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_promise___default.a.all([__WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].loadIfNotInit().then(function () {
      return __WEBPACK_IMPORTED_MODULE_3__models_Category__["a" /* default */].dump();
    }), __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].loadIfNotInit().then(function () {
      return __WEBPACK_IMPORTED_MODULE_4__models_Album__["a" /* default */].dump();
    })]).then(function (_ref) {
      var _ref2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
          categories = _ref2[0],
          albums = _ref2[1];

      _this.numbers.categories = categories.length;
      _this.numbers.albums = albums.length;
      _this.numbers.photos = albums.map(function (album) {
        return album.photos.length;
      }).reduce(function (a, b) {
        return a + b;
      });

      var _loop = function _loop(category) {
        category.rate = albums.filter(function (album) {
          return album.category === category.name;
        }).length / albums.length;
      };

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(categories), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var category = _step.value;

          _loop(category);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      _this.categories = categories;
      //          this.$router.app.$refs.sidebar.update(
      //            categories.length, albums.length
      //          )
      __WEBPACK_IMPORTED_MODULE_5__entries_admin_main__["sideBarBus"].$emit('sideBarUpdate', categories.length, albums.length);
    });
  },

  methods: {
    pickBarColor: function () {
      var last = null;
      var colors = ['success', 'primary', 'info', 'warning', 'danger'];
      return function pickOne() {
        var color = 'progress-bar-' + colors[Math.round(Math.random() * (colors.length - 1))].toString();
        if (color === last) {
          return pickOne();
        } else {
          last = color;
          return color;
        }
      };
    }()

  },
  computed: {
    pickBarAndColor: function pickBarAndColor() {
      return {
        'progress-bar': true
      };
    }
  }
});

/***/ }),

/***/ 221:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sweetalert__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sweetalert___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sweetalert__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(24);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_Config__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__libs_simple_modal__ = __webpack_require__(78);
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//






/* harmony default export */ __webpack_exports__["a"] = ({
  data: function data() {
    return {
      title: '',
      subtitle: '',
      background: 'url',
      background_url: '',
      defaultConfig: {}
    };
  },

  mounted: function mounted() {
    var _this = this;

    this.$nextTick(function () {});
    __WEBPACK_IMPORTED_MODULE_3__models_Config__["a" /* default */].load().then(function (config) {
      _this.defaultConfig = config;
      _this.updateConfig(config);
    });
  },
  methods: {
    updateConfig: function updateConfig(config) {
      this.title = config.title;
      this.subtitle = config.description;
      this.background_url = config.background;
    },
    reset: function reset() {
      this.updateConfig(this.defaultConfig);
      this.background = 'url';
    },
    submit: function submit() {
      var _this2 = this;

      __WEBPACK_IMPORTED_MODULE_0_sweetalert___default()({
        title: __WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */].filter('i18n')('input password'),
        type: 'input',
        inputType: 'password',
        showCancelButton: true,
        closeOnConfirm: false,
        animation: "slide-from-top",
        showLoaderOnConfirm: true
      }, function (password) {
        __WEBPACK_IMPORTED_MODULE_2__models_qiniu_bucket__["a" /* default */].fetchPutToken(password).then(function (putToken) {
          switch (_this2.background) {
            case 'url':
              console.log(_this2.background_url);
              return _this2.background_url;
            // break
            case 'file':
              var file = _this2.$refs.backgroundfile.files[0];
              if (!file) {
                throw new Error('Please select a file.');
              }
              var key = 'assets/bg-' + Math.random().toString(32).substr(2);
              return __WEBPACK_IMPORTED_MODULE_2__models_qiniu_bucket__["a" /* default */].putFile(key, file, { putToken: putToken }).then(function () {
                var asset = __WEBPACK_IMPORTED_MODULE_2__models_qiniu_bucket__["a" /* default */].key(key);
                return asset.url();
              });
          }
        }).then(function (backgroundUrl) {
          var config = {
            title: _this2.title,
            description: _this2.subtitle,
            background: backgroundUrl
          };
          return __WEBPACK_IMPORTED_MODULE_3__models_Config__["a" /* default */].update(password, config);
        }).then(function () {
          return __WEBPACK_IMPORTED_MODULE_0_sweetalert___default()({
            type: 'success',
            title: __WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */].filter('i18n')('update succeed')
          });
        }).catch(function (err) {
          return __WEBPACK_IMPORTED_MODULE_0_sweetalert___default()({
            type: 'error',
            title: err.message || __WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */].filter('i18n')('something went wrong')
          });
        });
      });
    }
  }
});

/***/ }),

/***/ 29:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export i18n */
/* unused harmony export detectLang */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__i18n_config_json__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__i18n_config_json___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__i18n_config_json__);

/* harmony default export */ __webpack_exports__["a"] = (i18n(__WEBPACK_IMPORTED_MODULE_0__i18n_config_json___default.a));
function i18n(config) {
  var lang = navigator.language;
  var defaultLang = config._default;

  return function (key) {
    var language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : lang;

    key = key.toLowerCase();

    // 检索适配标签
    var translations = config[key];

    // 如果适配配置中不存在
    // 则直接将输入的键值返回
    if (!translations) return key;

    // 如果配置文件中存在对详细语言进行适配，则将适配内容返回
    if (translations[language]) return translations[language];

    // 配置文件中存在对语言的笼统分类进行适配
    language = language.split('-')[0];
    if (translations[language]) return translations[language];

    // 返回默认配置结果
    if (translations[defaultLang]) return translations[defaultLang];

    return key;
  };
}

function detectLang() {
  var lang = navigator.language;
  return lang.split('-')[0];
}

/***/ }),

/***/ 319:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 320:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 322:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 323:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 333:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 334:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 335:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 377:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Sidebar_vue__ = __webpack_require__(211);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_268c7514_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Sidebar_vue__ = __webpack_require__(383);
function injectStyle (ssrContext) {
  __webpack_require__(323)
}
var normalizeComponent = __webpack_require__(2)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-268c7514"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Sidebar_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_268c7514_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_Sidebar_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 378:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    attrs: {
      "id": "category"
    }
  }, [_c('div', {
    staticClass: "page-header"
  }, [(_vm.category.title) ? _c('h1', [_vm._v(_vm._s(_vm.category.title))]) : _c('h1', [_vm._v(_vm._s(_vm._f("i18n")('new')) + " " + _vm._s(_vm._f("i18n")('category')))])]), _vm._v(" "), _c('form', [_c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "title"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('title')))]), _vm._v(" "), _c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.category.title),
      expression: "category.title"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": (_vm.category.title)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.category.title = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "name"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('name')))]), _vm._v(" "), _c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.category.name),
      expression: "category.name"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": (_vm.category.name)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.category.name = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "subtitle"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('subtitle')))]), _vm._v(" "), _c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.category.subtitle),
      expression: "category.subtitle"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": (_vm.category.subtitle)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.category.subtitle = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "cover"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('cover')))]), _vm._v(" "), _c('div', {
    staticClass: "category-cover img-rounded"
  }, [(_vm.category.cover) ? _c('img', {
    attrs: {
      "src": _vm.category.cover
    }
  }) : _c('img', {
    attrs: {
      "src": "https://placeholdit.imgix.net/~text?txtsize=47&txt=NO%20COVER&w=500&h=213"
    }
  })]), _vm._v(" "), _c('input', {
    ref: "cover",
    attrs: {
      "type": "file"
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('button', {
    staticClass: "btn btn-primary",
    on: {
      "click": _vm.submit
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-ok",
    attrs: {
      "aria-hidden": "true"
    }
  }), _vm._v(" " + _vm._s(_vm._f("i18n")('finish')) + "\n      ")]), _vm._v(" "), (_vm.category._key) ? _c('button', {
    staticClass: "btn btn-danger",
    on: {
      "click": _vm.Delete
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-remove"
  }), _vm._v(" " + _vm._s(_vm._f("i18n")('delete')) + "\n      ")]) : _vm._e()])])])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 379:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    attrs: {
      "id": "config"
    }
  }, [_c('div', {
    staticClass: "page-header"
  }, [_c('h1', [_vm._v(_vm._s(_vm._f("i18n")('setting')))])]), _vm._v(" "), _c('div', {
    staticClass: "row"
  }, [_c('form', [_c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "title"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('title')))]), _vm._v(" "), _c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.title),
      expression: "title"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text",
      "id": "title",
      "placeholder": "Filmy"
    },
    domProps: {
      "value": (_vm.title)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.title = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "subtitle"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('subtitle')))]), _vm._v(" "), _c('textarea', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.subtitle),
      expression: "subtitle"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text",
      "id": "subtitle",
      "rows": "7"
    },
    domProps: {
      "value": (_vm.subtitle)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.subtitle = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('label', {
    attrs: {
      "for": "background"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('background image')))]), _vm._v(" "), _c('div', {
    staticClass: "form-group",
    staticStyle: {
      "overflow": "hidden"
    }
  }, [_c('label', {
    staticClass: "col-sm-2 control-label"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.background),
      expression: "background"
    }],
    attrs: {
      "type": "radio",
      "value": "url",
      "name": "background"
    },
    domProps: {
      "checked": _vm._q(_vm.background, "url")
    },
    on: {
      "__c": function($event) {
        _vm.background = "url"
      }
    }
  }), _vm._v("\n          URL")]), _vm._v(" "), _c('div', {
    staticClass: "col-sm-10"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.background_url),
      expression: "background_url"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "url"
    },
    domProps: {
      "value": (_vm.background_url)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.background_url = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('label', {
    staticClass: "col-sm-2 control-label"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.background),
      expression: "background"
    }],
    attrs: {
      "type": "radio",
      "value": "file",
      "name": "background"
    },
    domProps: {
      "checked": _vm._q(_vm.background, "file")
    },
    on: {
      "__c": function($event) {
        _vm.background = "file"
      }
    }
  }), _vm._v("\n          " + _vm._s(_vm._f("i18n")('upload file')))]), _vm._v(" "), _c('div', {
    staticClass: "col-sm-10"
  }, [_c('input', {
    ref: "backgroundfile",
    attrs: {
      "type": "file"
    }
  })])]), _vm._v(" "), _c('button', {
    staticClass: "btn btn-primary",
    attrs: {
      "type": "button",
      "data-toggle": "button",
      "data-loading-text": _vm._f("i18n")('working')
    },
    on: {
      "click": _vm.submit
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('finish')) + "\n      ")]), _vm._v(" "), _c('button', {
    staticClass: "btn btn-default",
    attrs: {
      "type": "button"
    },
    on: {
      "click": _vm.reset
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('reset')))])])])])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 380:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    staticClass: "container"
  }, [_c('div', {
    staticClass: "row"
  }, [_c('div', {
    staticClass: "col-md-3"
  }, [_c('sidebar', {
    ref: "sidebar"
  })], 1), _vm._v(" "), _c('div', {
    staticClass: "col-md-9 pull-right"
  }, [_c('router-view')], 1)])])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 382:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    attrs: {
      "id": "dashboard"
    }
  }, [_c('div', {
    staticClass: "page-header"
  }, [_c('h1', [_vm._v(_vm._s(_vm._f("i18n")('dashboard')))])]), _vm._v(" "), _c('div', {
    staticClass: "row"
  }, [_c('div', {
    staticClass: "col-md-4 dashboard-number"
  }, [_c('h1', [_vm._v(_vm._s(_vm.numbers.categories))]), _vm._v(" "), _c('p', [_vm._v(_vm._s(_vm._f("i18n")('number of categories')))])]), _vm._v(" "), _c('div', {
    staticClass: "col-md-4 dashboard-number"
  }, [_c('h1', [_vm._v(_vm._s(_vm.numbers.albums))]), _vm._v(" "), _c('p', [_vm._v(_vm._s(_vm._f("i18n")('number of albums')))])]), _vm._v(" "), _c('div', {
    staticClass: "col-md-4 dashboard-number"
  }, [_c('h1', [_vm._v(_vm._s(_vm.numbers.photos))]), _vm._v(" "), _c('p', [_vm._v(_vm._s(_vm._f("i18n")('number of photos')))])])]), _vm._v(" "), _c('h3', [_vm._v(_vm._s(_vm._f("i18n")('rates of categories')))]), _vm._v(" "), _c('div', {
    staticClass: "progress"
  }, _vm._l((_vm.categories), function(category) {
    return _c('div', {
      class: [{
        'progress-bar': true
      }, _vm.pickBarColor()],
      style: ({
        width: category.rate * 100 + '%'
      })
    })
  })), _vm._v(" "), _c('div', {
    staticClass: "progress-labels"
  }, _vm._l((_vm.categories), function(category) {
    return (category.rate > 0) ? _c('div', {
      staticClass: "progress-label",
      style: ({
        width: category.rate * 100 + '%'
      })
    }, [_vm._v(_vm._s(category.title) + "\n    ")]) : _vm._e()
  }))])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 383:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    ref: "sidebar",
    attrs: {
      "id": "sidebar"
    }
  }, [_c('h2', [_vm._v("Filmy Admin")]), _vm._v(" "), _c('ul', {
    staticClass: "nav nav-pills nav-stacked"
  }, [_c('li', {
    class: {
      active: _vm.active == 'dashboard'
    },
    attrs: {
      "role": "presentation"
    }
  }, [_c('router-link', {
    attrs: {
      "to": "/dashboard"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('dashboard')))])], 1), _vm._v(" "), _c('li', {
    class: {
      active: _vm.active == 'settings'
    },
    attrs: {
      "role": "presentation"
    }
  }, [_c('router-link', {
    attrs: {
      "to": "/settings"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('setting')))])], 1), _vm._v(" "), _c('li', {
    class: {
      active: _vm.active == 'categories'
    },
    attrs: {
      "role": "presentation"
    }
  }, [_c('router-link', {
    attrs: {
      "to": "/categories"
    }
  }, [_vm._v("\n        " + _vm._s(_vm._f("i18n")('category')) + "\n        "), _c('span', {
    staticClass: "badge"
  }, [_vm._v(_vm._s(_vm.categories))])])], 1), _vm._v(" "), _c('li', {
    class: {
      active: _vm.active == 'albums'
    },
    attrs: {
      "role": "presentation"
    }
  }, [_c('router-link', {
    attrs: {
      "to": "/albums"
    }
  }, [_vm._v("\n        " + _vm._s(_vm._f("i18n")('album')) + "\n        "), _c('span', {
    staticClass: "badge"
  }, [_vm._v(_vm._s(_vm.albums))])])], 1), _vm._v(" "), _c('hr'), _vm._v(" "), _c('li', {
    attrs: {
      "role": "presentation"
    }
  }, [_c('a', {
    attrs: {
      "target": "_blank",
      "href": "/"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('go to home page')))])])])])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 39:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(81);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_slicedToArray__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_min__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_min___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_min__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lodash__);








// 本地存在 核心配置数据 filmy:config 吗？
// 存在 则获取本地数据
// 不存在 则通过七牛云下载 config.json 然后保存在本地 filmy:config

var Config = {
  load: function load() {
    var silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

    return __WEBPACK_IMPORTED_MODULE_4_min___default.a.exists('filmy:config').then(function (exists) {
      if (exists) {
        // 从数据库中获取核心配置数据
        return __WEBPACK_IMPORTED_MODULE_4_min___default.a.hgetall('filmy:config');
      } else {
        return __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__["a" /* default */].getFile('config.json').then(function (body) {
          return JSON.parse(body);
        }).then(function (data) {
          // 从七牛云获取到的数据存入数据库中
          try {
            __WEBPACK_IMPORTED_MODULE_4_min___default.a.hmset('filmy:config', data);
          } catch (err) {
            console.error(err);
          }
          return data;
        });
      }
    }).catch(function (error) {
      if (!silent) alert(error + 'You must init Filmy with the administrator tools.');
    });
  },


  // 通过七牛云密码来更新七牛云线上文件
  // 核心配置数据:
  // title
  // description
  // author
  // avatar
  // key 是 核心配置数据的键
  // value 是核心配置数据的值
  // ==============================================
  // 先用密码获取 putToken
  // 读取本地配置数据与 putToken 组成数组
  // 根据传入要修改的 key 和 value 修改成新的 config
  // 使用 Blob 构造类二进制文件对象
  // 将文件对象使用 putFile 上传到七牛云
  update: function update(password) {
    var update = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var silent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    if (!__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6_lodash__["isString"])(password)) {
      throw new TypeError('Password must be a string');
    }

    return __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__["a" /* default */].fetchPutToken(password, 'config.json').then(function (putToken) {
      return Config.load(silent).then(function (oldConfig) {
        return [oldConfig, putToken];
      }).catch(function () {
        return [{}, putToken];
      });
    }).then(function (_ref) {
      var _ref2 = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_slicedToArray___default()(_ref, 2),
          config = _ref2[0],
          putToken = _ref2[1];

      config = config || {};

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(update)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var key = _step.value;

          config[key] = update[key];
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      var fileData = new Blob([__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_json_stringify___default()(config)], { type: 'application/json' });
      fileData.name = 'config.json';

      return __WEBPACK_IMPORTED_MODULE_5__qiniu_bucket__["a" /* default */].putFile(fileData.name, fileData, {
        putToken: putToken
      });
    });
  }
};

/* harmony default export */ __webpack_exports__["a"] = (Config);

/***/ }),

/***/ 395:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    attrs: {
      "id": "categories"
    }
  }, [_c('div', {
    staticClass: "page-header"
  }, [_c('h1', [_vm._v(_vm._s(_vm._f("i18n")('category')))])]), _vm._v(" "), _c('div', {
    staticClass: "row"
  }, [_c('form', {
    staticClass: "form-inline pull-right"
  }, [_c('div', {
    staticClass: "form-group"
  }, [_c('button', {
    staticClass: "btn btn-primary",
    on: {
      "click": _vm.newer
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-plus",
    attrs: {
      "aria-hidden": "true"
    }
  }), _vm._v("\n          " + _vm._s(_vm._f("i18n")('new')) + "\n        ")])]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.query),
      expression: "query"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": (_vm.query)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.query = $event.target.value
      }
    }
  }), _vm._v(" "), _c('button', {
    staticClass: "btn",
    on: {
      "click": _vm.search
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-search",
    attrs: {
      "aria-hidden": "true"
    }
  }), _vm._v("\n          " + _vm._s(_vm._f("i18n")('search')) + "\n        ")])])])]), _vm._v(" "), _c('div', {
    staticClass: "row"
  }, _vm._l((_vm.categories), function(category) {
    return _c('router-link', {
      staticClass: "category img-rounded",
      attrs: {
        "to": {
          path: ("/categories/" + (category.name))
        }
      }
    }, [_c('h1', {
      staticClass: "category-title"
    }, [_vm._v(_vm._s(category.title) + " (" + _vm._s(category.count) + ")")]), _vm._v(" "), _c('img', {
      staticClass: "lazyload",
      attrs: {
        "data-src": category.cover,
        "alt": category.title
      }
    })])
  }))])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 396:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    attrs: {
      "id": "album"
    }
  }, [_c('div', {
    staticClass: "page-header"
  }, [(!_vm.newer) ? _c('h1', [_vm._v(_vm._s(_vm.album.title))]) : _c('h1', [_vm._v(_vm._s(_vm._f("i18n")('new')) + " " + _vm._s(_vm._f("i18n")('album')))])]), _vm._v(" "), _c('form', [_c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "title"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('title')))]), _vm._v(" "), _c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.album.title),
      expression: "album.title"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": (_vm.album.title)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.album.title = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "category"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('category')))]), _vm._v(" "), _c('select', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.album.category),
      expression: "album.category"
    }],
    staticClass: "form-control",
    on: {
      "change": function($event) {
        var $$selectedVal = Array.prototype.filter.call($event.target.options, function(o) {
          return o.selected
        }).map(function(o) {
          var val = "_value" in o ? o._value : o.value;
          return val
        });
        _vm.album.category = $event.target.multiple ? $$selectedVal : $$selectedVal[0]
      }
    }
  }, _vm._l((_vm.categories), function(category) {
    return _c('option', {
      domProps: {
        "selected": category.selected,
        "value": category.name
      }
    }, [_vm._v(_vm._s(category.title))])
  }))]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('label', {
    attrs: {
      "for": "content"
    }
  }, [_vm._v(_vm._s(_vm._f("i18n")('text content')))]), _vm._v(" "), _c('textarea', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.album.content),
      expression: "album.content"
    }],
    staticClass: "form-control",
    attrs: {
      "id": "content",
      "rows": "7"
    },
    domProps: {
      "value": (_vm.album.content)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.album.content = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    ref: "photos",
    staticClass: "photos",
    class: {
      over: _vm.over
    }
  }, [_vm._l((_vm.album.photos), function(photo, index) {
    return _c('div', {
      staticClass: "photo img-rounded"
    }, [_c('span', {
      staticClass: "remove-btn glyphicon glyphicon-remove",
      attrs: {
        "aria-hidden": "true"
      },
      on: {
        "click": function($event) {
          _vm.removePhoto(index)
        }
      }
    }), _vm._v(" "), _c('img', {
      attrs: {
        "src": photo
      }
    })])
  }), _vm._v(" "), _c('div', {
    staticClass: "photo"
  }, [_c('span', {
    ref: "add",
    staticClass: "add-btn glyphicon glyphicon-plus",
    attrs: {
      "aria-hidden": "true"
    }
  })])], 2), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('button', {
    staticClass: "btn btn-primary",
    on: {
      "click": _vm.submit
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-ok",
    attrs: {
      "aria-hidden": "true"
    }
  }), _vm._v(" " + _vm._s(_vm._f("i18n")('finish')))]), _vm._v(" "), (!_vm.newer) ? _c('button', {
    staticClass: "btn btn-danger",
    on: {
      "click": _vm.Delete
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-remove"
  }), _vm._v(" " + _vm._s(_vm._f("i18n")('delete')))]) : _vm._e()])])])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 397:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return _c('div', {
    attrs: {
      "id": "categories"
    }
  }, [_c('div', {
    staticClass: "page-header"
  }, [_c('h1', [_vm._v(_vm._s(_vm._f("i18n")('album')))])]), _vm._v(" "), _c('div', {
    staticClass: "row"
  }, [_c('ul', {
    staticClass: "nav nav-pills col-sm-7"
  }, [_c('li', {
    attrs: {
      "role": "presentation"
    },
    on: {
      "click": function($event) {
        _vm.showCategory()
      }
    }
  }, [_c('a', [_vm._v(_vm._s(_vm._f("i18n")('all')))])]), _vm._v(" "), _vm._l((_vm.categories), function(category) {
    return _c('li', {
      attrs: {
        "role": "presentation"
      },
      on: {
        "click": function($event) {
          _vm.showCategory(category)
        }
      }
    }, [_c('a', [_vm._v(_vm._s(category.title))])])
  })], 2), _vm._v(" "), _c('form', {
    staticClass: "form-inline pull-right"
  }, [_c('div', {
    staticClass: "form-group"
  }, [_c('button', {
    staticClass: "btn btn-primary",
    on: {
      "click": _vm.newer
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-plus",
    attrs: {
      "aria-hidden": "true"
    }
  }), _vm._v("\n          " + _vm._s(_vm._f("i18n")('new')) + "\n        ")])]), _vm._v(" "), _c('div', {
    staticClass: "form-group"
  }, [_c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.query),
      expression: "query"
    }],
    staticClass: "form-control",
    attrs: {
      "type": "text"
    },
    domProps: {
      "value": (_vm.query)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.query = $event.target.value
      }
    }
  }), _vm._v(" "), _c('button', {
    staticClass: "btn",
    on: {
      "click": _vm.search
    }
  }, [_c('span', {
    staticClass: "glyphicon glyphicon-search",
    attrs: {
      "aria-hidden": "true"
    }
  }), _vm._v("\n          " + _vm._s(_vm._f("i18n")('search')) + "\n        ")])])])]), _vm._v(" "), _c('div', {
    staticClass: "row"
  }, _vm._l((_vm.albums), function(album) {
    return _c('router-link', {
      staticClass: "album img-rounded",
      attrs: {
        "to": {
          path: ("/albums/" + (album._key))
        }
      }
    }, [_c('h3', {
      staticClass: "album-title"
    }, [_vm._v(_vm._s(album.title) + " "), _c('span', {
      staticClass: "category"
    }, [_vm._v(_vm._s(album.categoryTitle))])]), _vm._v(" "), _c('img', {
      staticClass: "lazyload",
      attrs: {
        "data-src": album.photos[0],
        "alt": album.title
      }
    })])
  }))])
}
var staticRenderFns = []
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);

/***/ }),

/***/ 42:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(124);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(125);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(127);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__ = __webpack_require__(126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_min_model__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_min_model___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_min_model__);







var ChineseStringIndexer = function (_Model$BaseIndexer) {
  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(ChineseStringIndexer, _Model$BaseIndexer);

  function ChineseStringIndexer() {
    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, ChineseStringIndexer);

    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ChineseStringIndexer.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ChineseStringIndexer)).apply(this, arguments));
  }

  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(ChineseStringIndexer, [{
    key: 'indexMapper',
    value: function indexMapper(val) {
      var url = 'http://api.pullword.com/get?source=' + encodeURIComponent(val) + '&threshold=0.5&json=1';

      return fetch(url, { method: 'POST' }).then(function (res) {
        return res.json();
      }).catch(function () {
        return [val];
      });
    }
  }, {
    key: 'async',
    get: function get() {
      return true;
    }
  }]);

  return ChineseStringIndexer;
}(__WEBPACK_IMPORTED_MODULE_5_min_model___default.a.BaseIndexer);

/* harmony default export */ __webpack_exports__["a"] = (ChineseStringIndexer);

/***/ }),

/***/ 56:
/***/ (function(module, exports) {

module.exports = {"_default":"en","back":{"en":"Back","zh":"返回"},"home":{"en":"Home","zh":"首页"},"category":{"en":"Category","zh":"分类"},"album":{"en":"Album","zh":"相册"},"apply":{"en":"Apply","zh":"初始化"},"admin password":{"en":"Admin Password","zh":"管理密码"},"setting":{"en":"Setting","zh":"设置"},"search":{"en":"Search","zh":"搜索"},"title":{"en":"Title","zh":"标题"},"subtitle":{"en":"Subtitle","zh":"副标题"},"background image":{"en":"Backrgound Image","zh":"背景图"},"upload file":{"en":"Upload File","zh":"上传文件"},"reset":{"en":"Reset","zh":"重置"},"finish":{"en":"Finish","zh":"完成"},"working":{"en":"Working","zh":"进行中"},"dashboard":{"en":"Dashboard","zh":"总览"},"number of categories":{"en":"Number of categories","zh":"分类数量"},"number of albums":{"en":"Number of albums","zh":"相册数量"},"number of photos":{"en":"Number of photos","zh":"照片总数"},"rates of categories":{"en":"Rates of categories","zh":"分类占比"},"input password":{"en":"Please input your admin password","zh":"请输入您的管理密码"},"update succeed":{"en":"Update succeed","zh":"更新成功"},"something went wrong":{"en":"Something went wrong","zh":"出错"},"new":{"en":"New","zh":"新增"},"delete":{"en":"Delete","zh":"删除"},"name":{"en":"Name","zh":"名称"},"cover":{"en":"Cover","zh":"封面"},"are you sure":{"en":"Are you sure?","zh":"你确定要这么做？"},"go to home page":{"en":"Go to the home page","zh":"前往首页"},"all":{"en":"All","zh":"全部"},"text content":{"en":"Text content","zh":"文本内容"},"password wrong":{"en":"Password is not correct","zh":"密码不正确"},"welcome back":{"en":"Welcome back","zh":"欢迎回来"}}

/***/ }),

/***/ 61:
/***/ (function(module, exports) {

module.exports = {"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}

/***/ }),

/***/ 62:
/***/ (function(module, exports) {

module.exports = {"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}

/***/ }),

/***/ 7:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_qiniu_js__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_qiniu_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_qiniu_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_crypto_browserify__ = __webpack_require__(101);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_crypto_browserify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_crypto_browserify__);





var filmyBucket = __WEBPACK_IMPORTED_MODULE_2_qiniu_js___default.a.bucket('mather', {
  // url: (qiniuBucketUrl ? qiniuBucketUrl : `${location.protocol}//${location.host}`)
  url: 'http://oq1ecwbwl.bkt.clouddn.com'
});

function getKeys(password) {
  return filmyBucket.getFile('secret-' + password + '.json').then(function (body) {
    return JSON.parse(body);
  });
}
// incorrect region, please use up-z2.qiniu.com
// in qiniu.js
filmyBucket.fetchPutToken = function (password) {
  var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
  var keys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  var returnBody = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;

  return (keys ? __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.resolve(keys) : getKeys(password)).then(function (keys) {
    var options = {
      // qiniu bucket name
      scope: 'mather' + (key ? ':' + key : ''),
      deadline: Math.floor(Date.now() / 1000) + 3600
    };

    if (returnBody) options.returnBody = returnBody;

    // Signture
    var signture = safeEncode(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(options));

    // Encode Digest
    var encodeDigest = encodeSign(signture, keys.sk);

    // Put token
    var token = keys.ak + ':' + encodeDigest + ':' + signture;

    return token;
  });
};

function safeEncode(str) {
  return btoa(str).replace(/\//g, '_').replace(/\+/g, '-');
}

function encodeSign(str, key) {
  return __WEBPACK_IMPORTED_MODULE_3_crypto_browserify___default.a.createHmac('sha1', key).update(str).digest('base64').replace(/\//g, '_').replace(/\+/g, '-');
}

/* harmony default export */ __webpack_exports__["a"] = (filmyBucket);

/***/ }),

/***/ 78:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = open;
var modalWrapper = null;
var _ = document.querySelector('#alertModal');

if (_) {
  modalWrapper = _;
} else {
  modalWrapper = document.createElement('div');
  modalWrapper.classList.add('modal');
  modalWrapper.classList.add('fade');
  modalWrapper.setAttribute('id', 'alertModal');
  modalWrapper.setAttribute('role', 'dialog');
  modalWrapper.setAttribute('aria-labelledby', 'alertModal');
  modalWrapper.setAttribute('aria-hidden', 'true');

  var modalDialogEl = document.createElement('div');
  modalDialogEl.classList.add('modal-dialog');

  var modalContentEl = document.createElement('div');
  modalContentEl.classList.add('modal-content');

  modalDialogEl.appendChild(modalContentEl);
  modalWrapper.appendChild(modalDialogEl);
  document.body.appendChild(modalWrapper);
}

function open(title, content, footer) {
  var modal = new Modal(modalWrapper, {
    content: '\n      <div class="modal-header">\n        <h4 class="modal-title">' + title + '</h4>\n      </div>\n      <div class="modal-body">\n        ' + content + '\n      </div>\n      <div class="modal-footer">\n        ' + footer + '\n      </div>\n    '
  });
  modal.open();
}

/***/ }),

/***/ 80:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sideBarBus", function() { return sideBarBus; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(24);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_router__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__libs_i18n__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_admin_Admin_vue__ = __webpack_require__(183);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__router_components_admin_Dashboard_vue__ = __webpack_require__(192);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__router_components_admin_Settings_vue__ = __webpack_require__(193);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__router_components_admin_Categories_vue__ = __webpack_require__(190);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__router_components_admin_Category_vue__ = __webpack_require__(191);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__router_components_admin_Albums_vue__ = __webpack_require__(189);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__router_components_admin_Album_vue__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__models_qiniu_bucket__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_sweetalert__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_sweetalert___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_sweetalert__);






// Routes







// Qiniu Cloud Storage Bucket Instance




__WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */].filter('i18n', __WEBPACK_IMPORTED_MODULE_3__libs_i18n__["a" /* default */]);
// Routing the router
__WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */].use(__WEBPACK_IMPORTED_MODULE_2_vue_router__["a" /* default */]);

var routes = [{
  path: '/',
  component: __WEBPACK_IMPORTED_MODULE_5__router_components_admin_Dashboard_vue__["a" /* default */]
}, {
  path: '/dashboard',
  name: 'dashboard',
  component: __WEBPACK_IMPORTED_MODULE_5__router_components_admin_Dashboard_vue__["a" /* default */]
}, {
  path: '/categories',
  name: 'categories',
  component: __WEBPACK_IMPORTED_MODULE_7__router_components_admin_Categories_vue__["a" /* default */]
}, {
  path: '/categories/:name',
  name: 'category',
  component: __WEBPACK_IMPORTED_MODULE_8__router_components_admin_Category_vue__["a" /* default */]
}, {
  path: '/albums',
  name: 'albums',
  component: __WEBPACK_IMPORTED_MODULE_9__router_components_admin_Albums_vue__["a" /* default */]
}, {
  path: '/albums/:key',
  name: 'album',
  component: __WEBPACK_IMPORTED_MODULE_10__router_components_admin_Album_vue__["a" /* default */]
}, {
  path: '/settings',
  name: 'settings',
  component: __WEBPACK_IMPORTED_MODULE_6__router_components_admin_Settings_vue__["a" /* default */]
}];

var router = new __WEBPACK_IMPORTED_MODULE_2_vue_router__["a" /* default */]({
  routes: routes
});

var sideBarBus = new __WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */]();

// Promisify sweetalert
var swalp = function swalp() {
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }

  return new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a(function (resolve) {
    swal.apply(undefined, args.concat([function () {
      return resolve.apply(undefined, arguments);
    }]));
  });
};

// Confirm the admin password
swalp({
  title: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__libs_i18n__["a" /* default */])('input password'),
  type: 'input',
  inputType: 'password',
  showCancelButton: true,
  closeOnConfirm: false,
  animation: 'slide-from-top',
  showLoaderOnConfirm: true
})
// Check the password
.then(function (password) {
  return __WEBPACK_IMPORTED_MODULE_11__models_qiniu_bucket__["a" /* default */].fetchPutToken(password);
}).then(function () {
  swal({
    type: 'success',
    title: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__libs_i18n__["a" /* default */])('welcome back'),
    timer: 1500,
    showConfirmButton: false
  });
  // router.start(Admin, '#admin')
  new __WEBPACK_IMPORTED_MODULE_1_vue__["a" /* default */]({
    el: '#admin',
    router: router,
    render: function render(h) {
      return h(__WEBPACK_IMPORTED_MODULE_4__components_admin_Admin_vue__["a" /* default */]);
    }
  });
}).catch(function () {
  console.log('fail');
  swalp({
    title: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__libs_i18n__["a" /* default */])('password wrong'),
    type: 'error'
  });
});

/***/ })

},[80]);
//# sourceMappingURL=admin-build.js.map